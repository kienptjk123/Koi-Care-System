import{d as S,r as l,j as e,P as k,a as h}from"./index-DJCnzeuI.js";import{L as A,H as M}from"./LeftSideBar-Ce9wCFYJ.js";import{T as E}from"./TopLayoutAD-TDVSMZH9.js";import{D as P,v as O,u as $,t as I,w as T}from"./index-D1y2TWOl.js";import{B as H,G as R}from"./index-_6hyxtml.js";import{b as F}from"./index-ClSWOeMV.js";import{u as c,w as Z}from"./xlsx-DjuO7_Ju.js";import{D as z}from"./DataGrid-DR5xZYzj.js";import"./index-DN07_IMb.js";/* empty css            */import"./logo-DG-ZgLhE.js";import"./index-Bj-wzm2a.js";import"./toPropertyKey-PLuKRk1e.js";import"./Typography-C8Tw1JDb.js";import"./SwitchBase-BgUJvhKL.js";import"./InputAdornment-B8iJeINd.js";function se(){const{isDarkMode:o}=S(),[i,p]=l.useState([]),[a,x]=l.useState(null),[u,m]=l.useState(!1),d=t=>{const r=new Date(t),s=String(r.getDate()).padStart(2,"0"),w=String(r.getMonth()+1).padStart(2,"0"),y=r.getFullYear(),v=String(r.getHours()).padStart(2,"0"),C=String(r.getMinutes()).padStart(2,"0"),D=String(r.getSeconds()).padStart(2,"0");return`${v}:${C}:${D} ${s}/${w}/${y}`},n=t=>t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")+"Ä‘",g=()=>{m(!1),x(null)},f=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const r=await h.get("https://koicaresystemv2.azurewebsites.net/api/payment/all",{headers:{Authorization:`Bearer ${t}`}});p(r.data.data)}catch(t){console.log("Error fetching Payments:",t)}};l.useEffect(()=>{f()},[]);const b=async t=>{try{const r=localStorage.getItem("token");if(!r)throw new Error("No token found");const s=await h.get(`https://koicaresystemv2.azurewebsites.net/api//orders/${t}/order`,{headers:{Authorization:`Bearer ${r}`}});x(s.data.data),m(!0)}catch(r){console.error("Error fetching order details:",r)}},j=[{field:"invoiceCode",headerName:"Invoice Code",width:200},{field:"createDate",headerName:"Create Date",flex:1,renderCell:t=>d(t.row.createDate)},{field:"transactionCode",headerName:"Transaction Code",width:200},{field:"amount",headerName:"Amount",flex:1,renderCell:t=>n(t.row.amount)},{field:"status",headerName:"Status",width:200,renderCell:t=>{const s=t.value==="COMPLETED";return e.jsx("div",{className:"h-full flex justify-center items-center",children:e.jsx("div",{className:`flex items-center justify-center py-1 px-2 rounded text-sm font-medium
                  ${s?"border-2 border-green-500 text-green-500":"border-2 border-red-500 text-red-500"}`,children:s?"COMPLETED":"CANCELLED"})})}},{field:"action",headerName:"Action",renderCell:t=>e.jsx("div",{className:"flex h-full justify-center items-center",children:e.jsx("button",{className:"p-1 hover:bg-green-500 text-green-500 hover:text-white  rounded-full",onClick:()=>b(t.row.orderId),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",children:[e.jsx("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z",clipRule:"evenodd"}),e.jsx("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375ZM6 12a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V12Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 15a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V15Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 18a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V18Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})]})})})}],N=()=>{const t=c.json_to_sheet(i.map(s=>({"Order ID":s.orderId,invoiceCode:s.invoiceCode,"Create Date":d(s.createDate),"Transaction Code":s.transactionCode,Amount:n(s.amount),Status:s.status}))),r=c.book_new();c.book_append_sheet(r,t,"Payments"),Z(r,"payments.xlsx")};return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(A,{}),e.jsxs("div",{className:`relative ${o?"bg-custom-light text-white":"bg-white text-black"} overflow-y-auto flex-1 flex-col overflow-x-hidden duration-200 ease-linear`,children:[e.jsx(M,{}),e.jsxs("div",{className:"py-5 px-[30px] mx-auto max-w-[1750px]",children:[e.jsx(E,{text:"Payment"}),e.jsx("div",{className:"w-full flex justify-end items-center relative",children:e.jsx("button",{onClick:N,className:"mb-4 p-2 bg-blue-500 text-white hover:bg-blue-700 rounded-md",children:"Download Excel"})}),e.jsx(k,{sx:{height:670},children:e.jsx(z,{rows:i,columns:j,pageSize:10,pageSizeOptions:[5,10,20,50,100],rowHeight:60,checkboxSelection:!0,disableExtendRowFullWidth:!0,getRowId:t=>t.orderId,sx:{"& .MuiDataGrid-columnHeaders":{backgroundColor:o?"#333":"#f5f5f5"},"& .MuiDataGrid-row:hover":{backgroundColor:o?"rgb(36 48 63 / var(--tw-bg-opacity))":"#e0e0e0"}}})}),u&&a&&e.jsx("div",{className:`fixed top-0 left-0 overflow-auto w-full h-full flex justify-center items-center z-50 bg-opacity-50 ${o?"bg-gray-900 text-gray-200":"bg-gray-800 text-gray-600"}`,children:e.jsxs("div",{className:`p-4 border rounded-lg max-h-[80vh] max-w-[100vw] overflow-auto ${o?"bg-gray-800 border-gray-700":"bg-white"}`,children:[e.jsx("h3",{className:"text-xl text-center font-bold mb-4",children:"ORDER DETAILS"}),e.jsxs("div",{className:"p-4 border rounded-lg shadow-lg",children:[e.jsxs("p",{className:"mb-3 flex items-center gap-2",children:[e.jsx(P,{className:"text-2xl text-blue-500"}),e.jsx("strong",{children:"Order ID:"})," ",a.id]}),e.jsxs("p",{className:"mb-3 flex items-center gap-2",children:[e.jsx(H,{className:"text-2xl text-purple-500"}),e.jsx("strong",{children:"Order Date:"})," ",d(a.orderDate)]}),e.jsxs("p",{className:"mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"text-2xl text-red-500"}),e.jsx("strong",{children:"Address:"})," ",a.address]}),e.jsxs("p",{className:"mb-3 flex items-center gap-2",children:[e.jsx($,{className:"text-2xl text-green-500"}),e.jsx("strong",{children:"Phone:"})," ",a.phone]}),e.jsxs("p",{className:"mb-3 flex items-center gap-2",children:[e.jsx(R,{className:"text-2xl "}),e.jsx("strong",{children:"Note:"})," ",a.note]}),e.jsxs("p",{className:"mb-3 flex items-center gap-2",children:[e.jsx(I,{className:"text-2xl "}),e.jsx("strong",{children:"RecipientName:"})," ",a.recipientName]}),e.jsxs("p",{className:"mb-3 flex items-center gap-2",children:[e.jsx(F,{className:"text-2xl text-red-500"}),e.jsx("strong",{children:"Status:"})," ",a.status]}),e.jsxs("p",{className:"mb-3 flex items-center gap-2",children:[e.jsx(T,{className:"text-2xl text-green-500"})," ",e.jsx("strong",{children:"Total Amount:"})," ",n(a.totalAmount)]})]}),e.jsxs("div",{className:"Order-Table overflow-auto p-4 mt-4 shadow-lg border rounded-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Item Details"}),e.jsxs("table",{className:"min-w-full border-spacing-x-1 border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"py-3 px-4 text-center text-xs font-bold uppercase",children:"No"}),e.jsx("th",{className:"py-3 px-2 text-center text-xs font-bold uppercase",children:"Product Name"}),e.jsx("th",{className:"py-3 px-2 text-center text-xs font-bold uppercase",children:"Quantity"}),e.jsx("th",{className:"py-3 px-2 text-center text-xs font-bold uppercase",children:"Total Price"})]})}),e.jsx("tbody",{children:a.items.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-1 text-center border-b border-gray-200",children:r+1}),e.jsx("td",{className:"py-2 px-1 text-center border-b border-gray-200",children:t.productName}),e.jsx("td",{className:"py-2 px-1 text-center border-b border-gray-200",children:t.quantity}),e.jsx("td",{className:"py-2 px-1 text-center border-b border-gray-200",children:n(t.price*t.quantity)})]},t.id))})]})]}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-red-500 text-white rounded",onClick:g,children:"Close"})]})})]})]})]})}export{se as default};
