import{d as I,r as o,u as w,j as e,a as u,B as y}from"./index-DjioKAOI.js";import{L as N,H as k}from"./LeftSideBar-C_nnyfG9.js";import{T as v}from"./TopLayoutShop-BAwS9hSw.js";import{a as S}from"./index.esm-Cvf1-Fqh.js";import"./index-dY6csf_Q.js";import"./index-CkLjUQaR.js";import"./index-BCH-H6GA.js";/* empty css            */import"./logo-DG-ZgLhE.js";function A(){const{isDarkMode:l}=I(),[a,c]=o.useState(!1),[$,n]=o.useState(!0),p=w(),[f,x]=o.useState([]),{register:m,handleSubmit:g,formState:{errors:s}}=S(),h=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const r=await u.get("https://koicaresystemv2.azurewebsites.net/api/products/all",{headers:{Authorization:`Bearer ${t}`}});x(r.data.data)}catch(t){console.log("Error fetching tags:",t)}};o.useEffect(()=>{h()},[]);const b=async t=>{console.log("onSubmit:",t),n(!0),c(!0);try{const r=localStorage.getItem("token");if(!r)throw new Error("No token found");const i=t.files;if(i&&i.length>0){const d=new FormData;for(const j of i)d.append("files",j);d.append("productId",t.productId);const E=await u.post("https://koicaresystemv2.azurewebsites.net/api/images/upload",d,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"multipart/form-data"}});y.success("Images created successfully!"),p("/shop/productImage")}}catch(r){console.log(r)}finally{c(!1),n(!1)}};return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(N,{}),e.jsxs("div",{className:`relative ${l?"bg-custom-light text-white":"bg-white text-black"} flex-1 overflow-y-auto`,children:[e.jsx(k,{}),e.jsxs("div",{className:"py-5 pb-0 px-[30px] mx-auto",children:[e.jsx(v,{text:"Product Images",textName:"Create Images",links:"shop/productImage"}),e.jsx("div",{className:" p-6 rounded-md border",children:e.jsxs("form",{onSubmit:g(b),noValidate:!0,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"productId",className:"block text-sm font-medium mb-2",children:"Product"}),e.jsxs("select",{id:"productId",className:`w-full p-2 border rounded-md ${l?"bg-custom-dark text-white":"bg-white text-black"} ${s.productId?"border-red-500":"border-gray-300"}`,...m("productId",{required:"Product is required"}),children:[e.jsx("option",{value:"",children:"Select Product"}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),s.productId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.productId.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"files",className:"block text-sm font-medium mb-2",children:"Upload Images"}),e.jsx("input",{type:"file",id:"files",multiple:!0,className:`relative w-full p-2 border rounded-md ${s.files?"border-red-500":"border-gray-300"}`,...m("files")}),s.files&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.files.message})]}),e.jsx("button",{type:"submit",className:`mt-5 w-full bg-blue-600 text-white p-2 rounded-md ${a?"opacity-50 cursor-not-allowed":""}`,disabled:a,children:a?"Creating...":"Create Images"})]})})]})]})]})}export{A as default};
