import{e as j,d as w,u as y,r,j as e,a as g,B as c}from"./index-D0YIHR4A.js";import{L as k,H as D}from"./LeftSideBar-BipZwdxj.js";import{T as v}from"./TopLayoutShop-B_mN4XiN.js";import{a as T}from"./index.esm-BJdVWKmv.js";import"./index-DfkVdce-.js";import"./index-BMdVHJVA.js";import"./index-aIHYwc5K.js";/* empty css            */import"./logo-DG-ZgLhE.js";function M(){const{id:o}=j(),{isDarkMode:i}=w(),u=y(),[n,l]=r.useState(!1),[S,d]=r.useState(!0),[$,p]=r.useState(null),{register:m,handleSubmit:x,formState:{errors:s},reset:h}=T(),b=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const a=await g.get(`https://koicaresystemv2.azurewebsites.net/api/tag/getID/${o}`,{headers:{Authorization:`Bearer ${t}`}});p(a.data.data),h(a.data.data)}catch(t){console.error("Error fetching tag:",t),c.error("Failed to fetch tag details.")}finally{d(!1)}};r.useEffect(()=>{b()},[o]);const f=async t=>{d(!0),l(!0);try{const a=localStorage.getItem("token");if(!a)throw new Error("No token found");const E=await g.put(`https://koicaresystemv2.azurewebsites.net/api/tag/update/${o}`,{tagName:t.tagName,tagDescription:t.tagDescription},{headers:{Authorization:`Bearer ${a}`}});c.success("Tag updated successfully!"),u("/shop/tag")}catch(a){console.log(a),c.error("Failed to update tag.")}finally{l(!1),d(!1)}},N=t=>{f(t)};return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(k,{}),e.jsxs("div",{className:`relative ${i?"bg-custom-light text-white":"bg-white text-black"} overflow-y-auto flex-1 flex-col  overflow-x-hidden duration-200 ease-linear`,children:[e.jsx(D,{}),e.jsxs("div",{className:"py-5 pb-0 px-[30px] mx-auto",children:[e.jsx(v,{text:"Tag",textName:"Update Tag",links:"shop/tag"}),e.jsx("div",{className:"p-6 rounded-md border",children:e.jsxs("form",{onSubmit:x(N),noValidate:!0,className:"mt-5 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tagName",className:"block text-sm font-bold",children:"Tag Name"}),e.jsx("input",{type:"text",id:"tagName",...m("tagName",{required:"Tag Name is required"}),className:`w-full p-2 border rounded-md ${i?"bg-custom-dark text-white":"bg-white text-black"} ${s.tagName?"border-red-500":"border-gray-300"}`}),s.tagName&&e.jsx("p",{className:"text-red-500 text-sm",children:s.tagName.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tagDescription",className:"block text-sm font-bold",children:"Tag Description"}),e.jsx("input",{type:"text",id:"tagDescription",...m("tagDescription",{required:"Tag Description is required"}),className:`w-full p-2 border rounded-md ${i?"bg-custom-dark text-white":"bg-white text-black"} ${s.tagDescription?"border-red-500":"border-gray-300"}`}),s.tagDescription&&e.jsx("p",{className:"text-red-500 text-sm",children:s.tagDescription.message})]}),e.jsx("button",{type:"submit",disabled:n,className:`mt-4 p-2 rounded ${n?"bg-gray-400":"bg-blue-500 hover:bg-blue-600"} text-white`,children:n?"Updating...":"Update Tag"})]})})]})]})]})}export{M as default};
