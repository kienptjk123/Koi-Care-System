import{d as A,r as l,u as z,j as e,L as C,a as n,B as j}from"./index-B6lDE10X.js";import{L as T,H as E}from"./LeftSideBar-228rYu2N.js";import{T as I,m as c}from"./TopLayout-BWrXDSGP.js";/* empty css                 */import"./index-zdI1LHq1.js";import"./index-C82jgAjb.js";import"./index-E5_DBUWf.js";import"./index-pU6niAKh.js";/* empty css            */import"./logo-DG-ZgLhE.js";import"./Popover-D5wYuPsK.js";import"./createSimplePaletteValueFilter-CtWn6jP0.js";import"./Transition-CB3Oswcw.js";import"./Typography-D8_YzR8Q.js";function O(){const{isDarkMode:a}=A(),[w]=l.useState([]),[m,x]=l.useState([]),[g,b]=l.useState(!1),[u,y]=l.useState(""),[M,N]=l.useState([]),h=z(),k=Array(13).fill(0),L=()=>{b(!g)},B=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const o=await n.get("https://koicaresystemv2.azurewebsites.net/api/tag",{headers:{Authorization:`Bearer ${t}`}});w(o.data.data)}catch(t){console.log("Error fetching tags:",t)}},S=async()=>{var t,o;try{const s=localStorage.getItem("token");if(!s)throw new Error("No token found");const r=await n.get("https://koicaresystemv2.azurewebsites.net/api/blog",{headers:{Authorization:`Bearer ${s}`}});x(r.data.data),r.data.data.forEach(i=>{const d=i.user.id;p(d)})}catch(s){n.isAxiosError(s)?((t=s.response)==null?void 0:t.status)===401?(console.error("Unauthorized access - Token expired or invalid. Logging out..."),localStorage.removeItem("token"),localStorage.removeItem("id"),j.error("Token expired, navigate to login"),h("/login")):console.error("Error fetching blogs:",(o=s.response)==null?void 0:o.status,s.message):console.error("An unexpected error occurred:",s)}},p=async t=>{var o,s;try{const r=localStorage.getItem("token");if(!r)throw new Error("No token found");const i=await n.get(`https://koicaresystemv2.azurewebsites.net/api/profile/${t}`,{headers:{Authorization:`Bearer ${r}`}});N(d=>({...d,[t]:i.data.data.avatar})),console.log(`Avatar for user ${t}:`,i.data.data.avatar)}catch(r){n.isAxiosError(r)?((o=r.response)==null?void 0:o.status)===401?(console.error("Unauthorized access - Token expired or invalid. Logging out..."),localStorage.removeItem("token"),localStorage.removeItem("id"),j.error("Token expired, navigate to login"),h("/login")):console.error("Error fetching profile:",(s=r.response)==null?void 0:s.status,r.message):console.error("An unexpected error occurred:",r)}};l.useEffect(()=>{p()},[]);const f=m.filter(t=>t.blogTitle.toLowerCase().includes(u.toLowerCase())),$=(t,o)=>{let s=[...m];console.log(s),s.sort((r,i)=>t==="asc"?r.blogTitle.localeCompare(i.blogTitle):i.blogTitle.localeCompare(r.blogTitle)),x(s)},v=t=>{$(t)};return l.useEffect(()=>{B()},[]),l.useEffect(()=>{S()},[]),e.jsx("div",{children:e.jsxs("div",{className:"h-screen flex",children:[e.jsx(T,{}),e.jsxs("div",{className:`relative ${a?"bg-custom-dark text-white":"bg-white text-black"} shadow-xl flex-1 flex-col overflow-y-auto overflow-x-hidden duration-200 ease-linear`,children:[e.jsx(E,{}),e.jsxs("div",{className:"py-5 px-[30px] mx-auto max-w-[1750px]",children:[e.jsx(I,{text:"News"}),e.jsxs("div",{className:"w-full flex justify-between flex-col lg:flex-row md:flex-row relative lg:items-center",children:[e.jsxs("div",{className:"flex relative justify-center items-center border border-gray-300 lg:px-6 px-5 lg:py-3 py-2 rounded-xl",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),e.jsx("input",{type:"text",value:u,onChange:t=>y(t.target.value),placeholder:"Search Blog...",className:`${a?"bg-custom-dark":""} pl-7 font-light outline-none text-lg`})]}),e.jsxs("div",{className:"cursor-pointer mt-3",onClick:L,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`${a?" text-custom-layout-light":"text-custom-layout-dark"} lg:size-8 size-6 mb-4`,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})}),e.jsx("div",{className:`absolute right-0 transition-all duration-500 -mt-3 border z-10 ease-in-out overflow-hidden ${g?"max-h-50 opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:`${a?"bg-custom-dark text-white":"bg-white text-black"} flex flex-col space-y-2 shadow-lg rounded-lg p-4`,children:[e.jsx("button",{className:`${a?"hover:bg-custom-layout-dark":"hover:bg-custom-layout-light"} btn py-2 px-4 rounded `,onClick:()=>v("desc"),children:"Sorted by Name (A-Z)"}),e.jsx("button",{className:`${a?"hover:bg-custom-layout-dark":"hover:bg-custom-layout-light"} btn py-2 px-4 rounded `,onClick:()=>v("asc"),children:"Sorted by Name (Z-A)"})]})})]})]}),f.length>0?e.jsx(c.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.3}}},className:"py-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:mt-2",children:f.map((t,o)=>{var s;return e.jsxs(c.div,{variants:{hidden:{opacity:0,x:100},visible:{opacity:1,x:0,transition:{delay:o*.3}}},whileHover:{scale:1.02},className:`${a?"bg-custom-dark text-white":"bg-white text-black"} mb-4 border rounded-lg shadow-sm duration-200`,children:[e.jsx("div",{className:"hover:scale-[102%]",children:e.jsxs(C,{to:`/member/news/${t.blogId}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.blogImage,alt:t.blogTitle,className:"w-full lg:h-72 h-48 object-cover relative rounded-t-lg",style:{objectFit:"cover",filter:"brightness(1.1) contrast(1.1)"}}),e.jsx("img",{src:t.avatar,className:"w-12 h-12 absolute -bottom-[20px] left-8 rounded-full border border-gray-300",alt:"Author's Avatar"})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"flex gap-2 lg:flex-row flex-col justify-between lg:items-center w-full mt-8 px-6",children:[e.jsx("div",{className:"flex gap-3",children:(s=t.tags)==null?void 0:s.map(r=>e.jsx("span",{className:`lg:text-lg text-sm flex justify-start px-2 py-1 rounded-xl ${a?"bg-custom-layout-dark":"bg-custom-layout-light"} `,children:r.tagName},r.tagId))}),e.jsx("p",{className:"font-semibold text-sm",children:t.blogDate})]})}),e.jsx("div",{className:"mt-4 px-5 py-2",children:e.jsx("h2",{className:"lg:text-xl text-lg line-clamp-2",children:t.blogTitle})})]})}),e.jsxs("div",{className:"p-3 flex w-full justify-between",children:[e.jsx("a",{className:"cursor-pointer flex items-center justify-center p-2 bg-slate-100 flex-none text-black w-10 h-10 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{className:"cursor-pointer flex items-center justify-center p-2 bg-slate-200 text-black flex-none text-blue w-10 h-10 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})})}),e.jsx("a",{className:"cursor-pointer flex items-center justify-center p-2 bg-blue-500 flex-none text-white w-10 h-10 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})})]})]})]},o)})}):e.jsx(c.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.3}}},className:"py-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:mt-2",children:k.map((t,o)=>e.jsxs(c.div,{variants:{hidden:{opacity:0,x:100},visible:{opacity:1,x:0,transition:{delay:o*.3}}},className:`${a?"bg-custom-dark text-white":"bg-white text-black"} mb-4 border rounded-lg shadow-sm duration-200 animate-bounce`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full lg:h-72 h-48 object-cover relative rounded-t-lg bg-gray-300"}),e.jsx("div",{className:"w-12 h-12 absolute -bottom-[20px] left-8 rounded-full border border-gray-300 bg-gray-400"})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"flex gap-2 lg:flex-row flex-col justify-between lg:items-center w-full mt-8 px-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:`lg:text-lg text-sm flex justify-start px-2 py-1 rounded-xl ${a?"bg-custom-layout-dark":"bg-gray-300"} w-16 h-6`}),e.jsx("div",{className:`lg:text-lg text-sm flex justify-start px-2 py-1 rounded-xl ${a?"bg-custom-layout-dark":"bg-gray-300"} w-16 h-6`})]}),e.jsx("div",{className:"font-semibold text-sm bg-gray-300 w-20 h-4 rounded"})]})}),e.jsxs("div",{className:"mt-4 px-5 py-2",children:[e.jsx("div",{className:"lg:text-xl text-lg line-clamp-2 bg-gray-300 h-6 w-full rounded mb-2"}),e.jsx("div",{className:"lg:text-xl text-lg line-clamp-2 bg-gray-300 h-6 w-3/4 rounded"})]})]}),e.jsxs("div",{className:"p-3 flex w-full justify-between",children:[e.jsx("div",{className:"cursor-pointer flex items-center justify-center p-2 bg-gray-300 flex-none w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"cursor-pointer flex items-center justify-center p-2 bg-gray-300 flex-none w-10 h-10 rounded-full"}),e.jsx("div",{className:"cursor-pointer flex items-center justify-center p-2 bg-gray-300 flex-none w-10 h-10 rounded-full"})]})]})]},o))})]})]})]})})}export{O as default};
