import{d as $,r as o,u as S,j as e,a as l,B as p}from"./index-CoU4576v.js";import{L as I,H as q}from"./LeftSideBar-fh7uST0p.js";import{T as F}from"./TopLayoutAD-CQefT65v.js";import{a as D}from"./index.esm-Cod_m23j.js";/* empty css            */import"./logo-DG-ZgLhE.js";import"./index-BKt2-fzg.js";import"./index-Dsj2DyTX.js";function R(){const{isDarkMode:s}=$(),[c,m]=o.useState(!1),[C,u]=o.useState(!0),x=S(),[b,h]=o.useState([]),[g,f]=o.useState([]),{register:a,handleSubmit:y,formState:{errors:t},reset:T}=D(),N=async()=>{try{const r=localStorage.getItem("token");if(!r)throw new Error("No token found");const i=await l.get("https://koicaresystemv2.azurewebsites.net/api/categories/all",{headers:{Authorization:`Bearer ${r}`}});h(i.data.data)}catch(r){console.log("Error fetching category:",r)}};o.useEffect(()=>{N()},[]);const j=async()=>{try{const r=localStorage.getItem("token");if(!r)throw new Error("No token found");const i=await l.get("https://koicaresystemv2.azurewebsites.net/api/suppliers/all",{headers:{Authorization:`Bearer ${r}`}});f(i.data.data)}catch(r){console.log("Error fetching tags:",r)}};o.useEffect(()=>{j()},[]);const w=async r=>{u(!0),m(!0);try{const i=localStorage.getItem("token");if(!i)throw new Error("No token found");const k=(await l.post("https://koicaresystemv2.azurewebsites.net/api/products/add",{name:r.name,brand:r.brand,price:r.price,inventory:r.inventory,description:r.description,description_detail:r.description_detail,category:r.category,supplierName:r.supplierName,issueTypeId:r.issueTypeId.split(",").map(d=>parseInt(d.trim())).filter(d=>!isNaN(d))},{headers:{Authorization:`Bearer ${i}`}})).data.data.id,n=r.files;if(n&&n.length>0){const d=new FormData;for(const v of n)d.append("files",v);d.append("productId",k),await l.post("https://koicaresystemv2.azurewebsites.net/api/images/upload",d,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"multipart/form-data"}})}p.success("Product created successfully!"),x("/admin/product")}catch(i){console.log(i),p.error("Failed to create Product.")}finally{m(!1),u(!1)}};return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(I,{}),e.jsxs("div",{className:`relative ${s?"bg-custom-light text-white":"bg-white text-black"} flex-1 overflow-y-auto`,children:[e.jsx(q,{}),e.jsxs("div",{className:"py-5 pb-0 px-[30px] max-w-[1750px] mx-auto",children:[e.jsx(F,{text:"Product",textName:"Create Product",links:"admin/product"}),e.jsx("div",{className:" p-6 rounded-md border",children:e.jsxs("form",{onSubmit:y(w),noValidate:!0,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",children:"Product Name"}),e.jsx("input",{type:"text",id:"name",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.name?"border-red-500":"border-gray-300"}`,...a("name",{required:"Name is required",minLength:2,maxLength:50})}),t.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.name.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium mb-2",children:"Brand"}),e.jsx("input",{type:"text",id:"brand",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.brand?"border-red-500":"border-gray-300"}`,...a("brand",{required:"Brand is required"})}),t.brand&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.brand.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium mb-2",children:"Price"}),e.jsx("input",{type:"number",id:"price",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.price?"border-red-500":"border-gray-300"}`,...a("price",{required:"Price is required"})}),t.price&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.price.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"inventory",className:"block text-sm font-medium mb-2",children:"Inventory"}),e.jsx("input",{type:"number",id:"inventory",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.inventory?"border-red-500":"border-gray-300"}`,...a("inventory",{required:"Inventory is required"})}),t.inventory&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.inventory.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{id:"description",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.description?"border-red-500":"border-gray-300"}`,...a("description",{required:"Description is required"})}),t.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.description.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description_detail",className:"block text-sm font-medium mb-2",children:"Detailed Description"}),e.jsx("textarea",{id:"description_detail",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.description_detail?"border-red-500":"border-gray-300"}`,...a("description_detail",{required:"Detailed description is required"})}),t.description_detail&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.description_detail.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium mb-2",children:"Category"}),e.jsxs("select",{id:"category",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.category?"border-red-500":"border-gray-300"}`,...a("category",{required:"Category is required"}),children:[e.jsx("option",{value:"",children:"Select Category"}),b.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))]}),t.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.category.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"supplierName",className:"block text-sm font-medium mb-2",children:"Supplier"}),e.jsxs("select",{id:"supplierName",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.supplierName?"border-red-500":"border-gray-300"}`,...a("supplierName",{required:"Supplier is required"}),children:[e.jsx("option",{value:"",children:"Select Supplier"}),g.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))]}),t.supplierName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.supplierName.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"issueTypeId",className:"block text-sm font-medium mb-2",children:"Issue Type"}),e.jsx("input",{type:"text",id:"issueTypeId",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.issueTypeId?"border-red-500":"border-gray-300"}`,...a("issueTypeId",{required:!1})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"files",className:"block text-sm font-medium mb-2",children:"Upload Images"}),e.jsx("input",{type:"file",id:"files",multiple:!0,className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${t.files?"border-red-500":"border-gray-300"}`,...a("files")}),t.files&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.files.message})]}),e.jsx("button",{type:"submit",className:`mt-5 w-full bg-blue-600 text-white p-2 rounded-md ${c?"opacity-50 cursor-not-allowed":""}`,disabled:c,children:c?"Creating...":"Create Product"})]})})]})]})]})}export{R as default};
