import{d as $,e as P,r as o,x as z,j as e,L as A,y as B,R as T,B as f,A as E,a as v}from"./index-CfTJQyAl.js";import{L as D,H as R}from"./LeftSideBar-DDUZtTuh.js";import{T as Z,m as y}from"./TopLayout-Csj-6t9x.js";import"./index-DqVkHg8o.js";import"./index-I2PFEF8e.js";import"./index-DWVl8mFw.js";import"./index-B1zBnQXA.js";/* empty css            */import"./logo-DG-ZgLhE.js";import"./Popover-dzxKlUDl.js";import"./createSimplePaletteValueFilter-D-6_72BM.js";import"./Transition-DBChHCkG.js";import"./Typography-DYzreIeS.js";function ee(){const{isDarkMode:i}=$(),{id:j}=P(),[a,w]=o.useState([]),[m,b]=o.useState([]),[N,h]=o.useState(""),[n,u]=o.useState([]),[g,k]=o.useState(null),c=z(),C=s=>{c(B(s))};o.useEffect(()=>{const s=localStorage.getItem("wishlist");s&&u(JSON.parse(s))},[]);const L=s=>{let t;n.some(r=>r.id===s.id)?(t=n.filter(r=>r.id!==s.id),c(T(s)),f.success("Remove to wishlist success!!",{autoClose:1e3})):(t=[...n,s],c(E(s)),f.success("Add to wishlist success!!",{autoClose:1e3})),u(t),localStorage.setItem("wishlist",JSON.stringify(t))},S=async()=>{try{const s=localStorage.getItem("token"),t=j,l=await v.get(`https://koicaresystemv2.azurewebsites.net/api/issues/latest/${t}`,{headers:{Authorization:`Bearer ${s}`}});w(l.data.data)}catch(s){console.log(s)}},x=async s=>{try{const t=localStorage.getItem("token"),l=await v.get(`https://koicaresystemv2.azurewebsites.net/api/products/recommend/${s}`,{headers:{Authorization:`Bearer ${t}`}});b(l.data.data)}catch(t){console.log(t)}};o.useEffect(()=>{x()},[]);const I=s=>{h(s);const t=a.find(l=>l.id===s);k(t||null)};return o.useEffect(()=>{S()},[]),o.useEffect(()=>{a.length>0&&(h(a[0].id),x(a[0].issueTypeId))},[a]),e.jsx("div",{children:e.jsxs("div",{className:"h-screen flex",children:[e.jsx(D,{}),e.jsxs("div",{className:`relative ${i?"bg-custom-dark text-white":"bg-white text-black"} shadow-xl flex-1 flex-col overflow-y-auto overflow-x-hidden`,children:[e.jsx(R,{}),e.jsxs("div",{className:"py-5 px-[30px] mx-auto max-w-[1750px]",children:[e.jsx(Z,{text:"My Pond",textName:"My Pond Issue",links:"member/myPond"}),e.jsxs("div",{className:"border flex flex-col lg:flex-row border-gray-200 mt-10",children:[e.jsx("div",{className:"flex-none w-full lg:w-[250px] border-r border-gray-200",children:e.jsxs("div",{className:"px-4 py-5 border-b border-gray-200",children:[e.jsx("div",{className:"font-semibold text-xl lg:text-2xl mt-2",children:"All Issues"}),e.jsx("div",{className:"border-b-gray-200 mt-5",children:a.map(s=>e.jsx("div",{className:`py-3 mt-2 px-6 custom rounded-xl ${N===s.id?`${i?"bg-custom-layout-dark":" bg-custom-layout-light"}`:`${i?"hover:bg-custom-layout-dark":"hover:bg-custom-layout-light"}`} cursor-pointer`,onClick:()=>{x(s.issueTypeId),I(s.id)},children:s.name},s.id))})]})}),e.jsx("div",{className:"flex-auto",children:e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"flex-none w-full lg:w-[800px] px-4 py-7 lg:px-7 lg:py-7 border-r border-gray-200",children:[e.jsx("div",{className:"font-semibold text-xl lg:text-2xl",children:"Products"}),e.jsx(y.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.3}}},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 lg:gap-8 py-3 mt-4",children:m.length>0?m.map((s,t)=>{var l,r;return e.jsxs(y.div,{variants:{hidden:{opacity:0,x:100},visible:{opacity:1,x:0,transition:{delay:t*.3}}},whileHover:{scale:1.02},className:"border border-gray-200 rounded-xl hover:scale-[102%] duration-300",children:[e.jsxs("div",{className:"border-b border-gray-200 max-h-[300px]",children:[e.jsx(A,{to:`/member/recommendations/${s.id}`,className:"min-h-[150px] cursor-pointer",children:e.jsx("img",{src:(l=s==null?void 0:s.images[0])==null?void 0:l.downloadUrl,alt:"",className:"w-full h-[290px] rounded-t-lg"})},(r=s==null?void 0:s.images[0])==null?void 0:r.id),e.jsx("button",{"aria-label":"wishlist",onClick:()=>L(s),children:n.some(p=>p.id===s.id)?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`size-11 relative rounded-full -top-[13px] text-red-500 cursor-pointer left-[50%] p-2 ${i?"bg-custom-layout-dark":"bg-custom-layout-light"}`,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`size-11 relative rounded-full -top-[13px] cursor-pointer left-[50%] p-2 ${i?"bg-custom-layout-dark":"bg-custom-layout-light"}`,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})})}),e.jsx("svg",{onClick:()=>C(s),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`size-11 relative rounded-full -top-[60px] -right-[85%] p-2 cursor-pointer ${i?"bg-custom-layout-dark":"bg-custom-layout-light"}`,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})]}),e.jsxs("div",{className:"px-7 py-5 text-xl mt-5 font-medium",children:[e.jsx("div",{className:"line-clamp-1",children:s.name}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"mt-3",children:[" ",s.price.toLocaleString("vi-VN",{style:"currency",currency:"VND"})]}),e.jsx("div",{className:"mt-3 flex",children:[...Array(5)].map((p,d)=>{const M=d<Math.floor(s.rating),W=d<s.rating&&d>=Math.floor(s.rating);return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:M?"gold":W?"url(#half-star)":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6 text-yellow-500",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"half-star",children:[e.jsx("stop",{offset:"50%",stopColor:"gold"}),e.jsx("stop",{offset:"50%",stopColor:"none"})]})}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3.5l2.715 5.451 6.027.488-4.373 3.751 1.331 5.551L12 15.902l-5.7 3.839 1.331-5.551-4.373-3.751 6.027-.488L12 3.5z"})]},d)})})]})]})]},s.id)}):e.jsx("div",{className:"",children:"No product found"})})]}),e.jsxs("div",{className:"flex-auto px-4 py-7 lg:px-7 lg:py-7",children:[e.jsx("div",{className:"text-start font-semibold text-xl lg:text-2xl",children:"Description"}),e.jsx("div",{className:"text-lg lg:text-2xl mt-5 text-justify",children:g?g.description:"No description available"})]})]})})]})]})]})]})})}export{ee as default};
