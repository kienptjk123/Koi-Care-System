import{r as t,u as j,j as s,T as x,L as v,a as b,B as m}from"./index-DJCnzeuI.js";import{F as P}from"./index-D1y2TWOl.js";import{b as N}from"./0917(1)-C6vz000w.js";import{I as p}from"./InputAdornment-B8iJeINd.js";import"./Typography-C8Tw1JDb.js";function S(){const[i,r]=t.useState(!1),[o,n]=t.useState(null),u=j(),[e,c]=t.useState(!1),[l,h]=t.useState(""),[d,w]=t.useState(""),g=()=>{r(!0),n(null);const a=localStorage.getItem("email"),f=localStorage.getItem("otp");if(l.length<8){n("Password must be at least 8 characters long"),r(!1);return}if(l!==d){n("Passwords do not match"),r(!1);return}b.post("https://koicaresystemv2.azurewebsites.net/api/auth/resetPassword",{email:a,newPassword:l,otp:f}).then(()=>{u("/login"),m.success("Reset Password successfully!!")}).catch(()=>m.error("Reset password fail")).finally(()=>r(!1))};return s.jsxs("div",{className:"h-screen flex flex-col items-center justify-center",children:[s.jsx("video",{className:"absolute top-0 left-0 w-full h-full object-cover",src:N,autoPlay:!0,loop:!0,muted:!0}),s.jsxs("div",{className:"absolute bg-white p-8 rounded-3xl shadow-md w-full max-w-md bg-opacity-30 backdrop-blur-0 border border-gray-300",children:[s.jsx("h2",{className:"text-black text-3xl font-bold mb-6 text-center",children:"Reset Password"}),s.jsx("div",{className:"mb-6 relative",children:s.jsx(x,{label:"Password",type:e?"text":"password",id:"password",value:l,onChange:a=>h(a.target.value),placeholder:"*********",variant:"outlined",fullWidth:!0,InputProps:{endAdornment:s.jsx(p,{position:"end",children:s.jsx("span",{onClick:()=>c(!e),className:"cursor-pointer text-gray-500","aria-label":"toggle password visibility",children:e?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:s.jsx("path",{d:"M12 4.5C5.25 4.5 1.5 12 1.5 12s3.75 7.5 10.5 7.5S22.5 12 22.5 12 18.75 4.5 12 4.5Zm0 12a4.5 4.5 0 1 1 0-9 4.5 4.5 0 0 1 0 9Zm0-7.5a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"})}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:[s.jsx("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"}),s.jsx("path",{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"}),s.jsx("path",{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"})]})})})},error:!!o,helperText:o&&s.jsx("span",{className:"text-red-500",children:o})})}),s.jsx("div",{className:"mb-6 relative",children:s.jsx(x,{label:"Confirm Password",type:e?"text":"password",id:"confirmPassword",value:d,onChange:a=>w(a.target.value),placeholder:"*********",variant:"outlined",fullWidth:!0,InputProps:{endAdornment:s.jsx(p,{position:"end",children:s.jsx("span",{onClick:()=>c(!e),className:"cursor-pointer text-gray-500","aria-label":"toggle confirm password visibility",children:e?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:s.jsx("path",{d:"M12 4.5C5.25 4.5 1.5 12 1.5 12s3.75 7.5 10.5 7.5S22.5 12 22.5 12 18.75 4.5 12 4.5Zm0 12a4.5 4.5 0 1 1 0-9 4.5 4.5 0 0 1 0 9Zm0-7.5a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z"})}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:[s.jsx("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"}),s.jsx("path",{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"}),s.jsx("path",{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"})]})})})}})}),s.jsx("button",{onClick:()=>g(),className:`w-full flex items-center justify-center bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-semibold ${i?"opacity-50 cursor-not-allowed":""}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[i&&s.jsx(P,{className:"animate-spin"}),s.jsx("span",{children:"Change password"})]})}),s.jsx("div",{className:"text-black font-bold mt-2 text-center",children:s.jsx(v,{to:"/login",className:"text-black ml-1 font-bold",children:"Back to input OTP"})})]})]})}export{S as default};
