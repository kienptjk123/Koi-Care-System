import{e as j,d as w,u as y,r as c,j as e,a as I,B as u}from"./index-CoU4576v.js";import{L as N,H as k}from"./LeftSideBar-CgWCGgBa.js";import{T as v}from"./TopLayoutShop-Co4L0DWg.js";import{a as S}from"./index.esm-Cod_m23j.js";/* empty css            */import"./logo-DG-ZgLhE.js";import"./index-BKt2-fzg.js";import"./index-Dsj2DyTX.js";import"./index-DYOF6FZU.js";function M(){const{id:p}=j(),{isDarkMode:o}=w(),f=y(),[a,i]=c.useState(!1),[$,m]=c.useState(!0),{register:x,handleSubmit:g,formState:{errors:r}}=S(),b=async t=>{var l,d;m(!0),i(!0);try{const s=localStorage.getItem("token");if(!s)throw new Error("No token found");const n=new FormData;t.file&&t.file.length>0&&n.append("file",t.file[0]);const L=await I.put(`https://koicaresystemv2.azurewebsites.net/api/images/image/${p}/update`,n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s}`}});u.success("Image updated successfully!"),f("/shop/productImage")}catch(s){console.log(s),u.error(((d=(l=s.response)==null?void 0:l.data)==null?void 0:d.message)||"Failed to update Image.")}finally{i(!1),m(!1)}},h=t=>{b(t)};return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(N,{}),e.jsxs("div",{className:`relative ${o?"bg-custom-light text-white":"bg-white text-black"} flex-1 overflow-y-auto`,children:[e.jsx(k,{}),e.jsxs("div",{className:"py-5 pb-0 px-[30px] mx-auto",children:[e.jsx(v,{text:"Product Images",textName:"Create Images",links:"shop/productImage"}),e.jsx("div",{className:" p-6 rounded-md border",children:e.jsxs("form",{onSubmit:g(h),noValidate:!0,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"file",className:"block text-sm font-medium mb-2",children:"Upload Images"}),e.jsx("input",{type:"file",id:"file",className:`w-full p-2 border rounded-md ${o?"bg-custom-dark text-white":"bg-white text-black"} ${r.file?"border-red-500":"border-gray-300"}`,...x("file")}),r.file&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.file.message})]}),e.jsx("button",{type:"submit",className:`mt-5 w-full bg-blue-600 text-white p-2 rounded-md ${a?"opacity-50 cursor-not-allowed":""}`,disabled:a,children:a?"Update...":"Update Images"})]})})]})]})]})}export{M as default};
