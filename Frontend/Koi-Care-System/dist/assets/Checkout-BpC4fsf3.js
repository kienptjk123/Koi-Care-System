import{r as s,d as O,u as X,a as i,j as e,L as A}from"./index-DjioKAOI.js";import{L as Z,H as G}from"./LeftSideBar-DNbYewM5.js";import{T as J}from"./TopLayout-W_B5mGG7.js";import"./index-hi634anw.js";import"./index-CkLjUQaR.js";import"./index-DAGt3vhE.js";import"./index-BCH-H6GA.js";/* empty css            */import"./logo-DG-ZgLhE.js";import"./Typography-iYVerFVv.js";function ce(){const[d,b]=s.useState(""),[j,y]=s.useState(""),[N,v]=s.useState(""),[D,V]=s.useState(""),[K,_]=s.useState([]),{isDarkMode:l}=O(),[x,z]=s.useState([]),[r,B]=s.useState("0"),[g,M]=s.useState([]),[a,Q]=s.useState("0"),[m,w]=s.useState([]),[u,R]=s.useState("0"),[h,q]=s.useState(""),[S,f]=s.useState(""),[k,p]=s.useState(""),[$,C]=s.useState(""),H=X();s.useEffect(()=>{var T,I,L;const t=((T=x.find(c=>c.id===r))==null?void 0:T.full_name)||"",n=((I=g.find(c=>c.id===a))==null?void 0:I.full_name)||"",o=((L=m.find(c=>c.id===u))==null?void 0:L.full_name)||"";q(`${N}, ${o}, ${n}, ${t}`.trim())},[N,r,a,u,x,g,m]);const W=async()=>{try{const t=localStorage.getItem("token"),n=localStorage.getItem("id");if(!h||h.trim()===""){f("Address cannot be empty");return}else f("");if(!d||d.trim()===""){C("Name cannot be empty");return}else C("");if(/^0\d{8,9}$/.test(j))p("");else{p("Phone number must be 9 or 10 digits and start with 0");return}await i.post("https://koicaresystemv2.azurewebsites.net/api/orders/order",{userId:n,address:h,phone:j,recipientName:d,note:D},{headers:{Authorization:`Bearer ${t}`}}),H("/member/payment"),v(""),y(""),b(""),f(""),p("")}catch(t){console.log(t)}},F=async()=>{try{const t=localStorage.getItem("token"),n=localStorage.getItem("cartId");if(!t)throw new Error("No token found");const o=await i.get(`https://koicaresystemv2.azurewebsites.net/api/carts/cart/${n}/my-cart`,{headers:{Authorization:`Bearer ${t}`}});_(o.data.data),console.log(o.data.data)}catch(t){console.log(t)}};s.useEffect(()=>{F()},[]),s.useEffect(()=>{i.get("https://esgoo.net/api-tinhthanh/1/0.htm").then(t=>{t.data.error===0&&(z(t.data.data),console.log(t.data.data))}).catch(t=>console.error("Error fetching provinces:",t))},[]),s.useEffect(()=>{r!=="0"&&i.get(`https://esgoo.net/api-tinhthanh/2/${r}.htm`).then(t=>{t.data.error===0&&(M(t.data.data),w([]))}).catch(t=>console.error("Error fetching districts:",t))},[r]),s.useEffect(()=>{a!=="0"&&i.get(`https://esgoo.net/api-tinhthanh/3/${a}.htm`).then(t=>{t.data.error===0&&w(t.data.data)}).catch(t=>console.error("Error fetching wards:",t))},[a]);const E=Number(localStorage.getItem("totalPrice")||0),P=Number(localStorage.getItem("promotionTotal")||0);return e.jsx("div",{children:e.jsxs("div",{className:"h-screen flex",children:[e.jsx(Z,{}),e.jsxs("div",{className:`relative ${l?"bg-custom-dark text-white":"bg-white text-black"} shadow-xl flex-1 flex-col overflow-y-auto overflow-x-hidden`,children:[e.jsx(G,{}),e.jsxs("div",{className:"py-5 px-[30px] mx-auto max-w-[1750px] ",children:[e.jsx(J,{text:"Recommendations",textName:"Checkout",links:"member/recommendations"}),e.jsxs("div",{className:"lg:border lg:border-gray-200 lg:px-10 lg:py-5 rounded-xl",children:[e.jsxs("ol",{className:"items-center lg:flex hidden w-full px-52 pb-20 pt-14 justify-center text-center text-sm font-medium text-gray-700",children:[e.jsx("li",{className:"flex items-center after:mx-2 after:mb-10 after:h-1 after:w-full w-full after:border-b after:border-gray-400",children:e.jsxs("span",{className:"flex flex-col",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-10 bg-blue-400 rounded-full text-white",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),e.jsx("div",{className:"mt-4",children:"Cart"})]})}),e.jsx("li",{className:"flex items-center after:mx-2 after:mb-10 after:h-1 after:w-full w-full after:border-b after:border-gray-400 dark:text-primary-500",children:e.jsxs("span",{className:"flex flex-col",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-400 flex items-center justify-center text-white ",children:"2"}),e.jsx("div",{className:"mt-4",children:"Address"})]})}),e.jsx("li",{className:"flex items-center",children:e.jsxs("span",{className:"fpalex flex-col",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-400 flex items-center justify-center text-white ",children:"3"}),e.jsx("div",{className:"mt-4",children:"Payment"})]})})]}),e.jsxs("div",{className:"lg:border lg:border-gray-200 lg:px-10 lg:py-5 lg:mt-10 rounded-xl",children:[e.jsx("div",{className:"lg:text-2xl text-xl font-semibold",children:"Address"}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:mt-7 mt-3 text-xl lg:gap-24 justify-between items-center w-full",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{type:"text",onChange:t=>b(t.target.value),placeholder:"Name",className:`border ${l?"bg-custom-dark":"bg-white"} lg:px-4 px-3 lg:mt-3 lg:text-lg text-base mt-5 rounded-lg lg:py-3 py-1 border-gray-200 outline-none focus:ring-2 focus:ring-blue-400`}),$&&e.jsx("p",{className:"text-red-500 lg:text-base text-xs mt-3",children:$})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("input",{type:"text",onChange:t=>y(t.target.value),placeholder:"Phone",className:`border ${l?"bg-custom-dark":"bg-white"} lg:px-4 px-3 lg:mt-3 lg:text-lg text-base mt-5 rounded-lg lg:py-3 py-1 border-gray-200 outline-none focus:ring-2 focus:ring-blue-400`}),k&&e.jsx("p",{className:"text-red-500 lg:text-base text-xs",children:k})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:gap-7 gap-2 lg:mt-7 mt-5",children:[e.jsxs("select",{className:`border ${l?"bg-custom-dark":"bg-white"} border-gray-200 lg:py-3 lg:px-4 px-3 py-1 rounded-lg`,id:"tinh",name:"tinh",value:r,onChange:t=>B(t.target.value),title:"Chọn Tỉnh Thành",children:[e.jsx("option",{value:"0",children:"Province"}),x.map(t=>e.jsx("option",{value:t.id,children:t.full_name},t.id))]}),e.jsxs("select",{className:`border ${l?"bg-custom-dark":"bg-white"} border-gray-200 lg:py-3 lg:px-4 px-3 py-1 lg:mt-0 mt-3 rounded-lg`,id:"quan",name:"quan",value:a,onChange:t=>Q(t.target.value),title:"Chọn Quận Huyện",disabled:r==="0",children:[e.jsx("option",{value:"0",children:"District"}),g.map(t=>e.jsx("option",{value:t.id,children:t.full_name},t.id))]}),e.jsxs("select",{className:`border ${l?"bg-custom-dark":"bg-white"} border-gray-200 lg:py-3 lg:px-4 px-3 py-1 lg:mt-0 mt-3 rounded-lg`,id:"phuong",name:"phuong",value:u,onChange:t=>R(t.target.value),title:"Chọn Phường Xã",disabled:a==="0",children:[e.jsx("option",{value:"0",children:"Ward"}),m.map(t=>e.jsx("option",{value:t.id,children:t.full_name},t.id))]})]}),e.jsxs("div",{className:"flex flex-col w-full lg:mt-7 mt-5 text-xl",children:[e.jsx("input",{type:"text",onChange:t=>v(t.target.value),placeholder:"Address",className:`border lg:px-4 ${l?"bg-custom-dark":"bg-white"} px-4 py-1 lg:mt-3 rounded-lg lg:text-lg text-base lg:py-3 border-gray-200 outline-none focus:ring-2 focus:ring-blue-400`}),S&&e.jsx("p",{className:"text-red-500 lg:text-base text-xs",children:S})]}),e.jsx("div",{className:"flex flex-col w-full lg:mt-7 mt-5 text-xl",children:e.jsx("textarea",{type:"text",onChange:t=>V(t.target.value),placeholder:"Note",className:`border lg:px-4 ${l?"bg-custom-dark":"bg-white"} px-4 py-1 lg:mt-3 rounded-lg lg:text-lg text-base lg:py-6 border-gray-200 outline-none focus:ring-2 focus:ring-blue-400`})})]}),e.jsxs("div",{className:"lg:border lg:border-gray-200 lg:px-10 lg:py-5 mt-10 rounded-xl",children:[e.jsx("div",{className:"lg:text-2xl text-xl font-semibold",children:"Order Summary"}),e.jsxs("div",{className:"flex mt-5 lg:mt-7 text-lg lg:text-xl justify-between",children:[e.jsx("div",{className:"",children:"Sub Total"}),e.jsx("div",{className:"",children:E.toLocaleString("vi-VN",{style:"currency",currency:"VND"})})]}),e.jsxs("div",{className:"flex mt-5 lg:mt-7 text-lg lg:text-xl justify-between",children:[e.jsx("div",{className:"",children:"Discount"}),e.jsxs("div",{className:"",children:[" ",(E-P).toLocaleString("vi-VN",{style:"currency",currency:"VND"})]})]}),e.jsxs("div",{className:"flex mt-5 lg:mt-7 text-lg lg:text-xl justify-between",children:[e.jsx("div",{className:"",children:"Shipping"}),e.jsx("div",{className:"",children:"Free"})]}),e.jsxs("div",{className:"flex mt-5 lg:mt-7 text-lg lg:text-xl justify-between",children:[e.jsx("div",{className:"font-medium",children:"Total"}),e.jsx("div",{className:"",children:P.toLocaleString("vi-VN",{style:"currency",currency:"VND"})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-0 justify-between mt-8",children:[e.jsx(A,{to:-1,className:"w-full lg:w-auto px-6 py-3 bg-gray-300 hover:bg-gray-400 text-white text-center rounded-lg cursor-pointer",children:"Back"}),e.jsx(A,{onClick:()=>W(),className:"w-full lg:w-auto px-6 py-3 bg-blue-400 hover:bg-blue-500 text-white rounded-lg text-center cursor-pointer",children:"Payment"})]})]})]})]})]})})}export{ce as default};
