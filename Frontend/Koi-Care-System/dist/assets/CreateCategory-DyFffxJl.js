import{d as g,r as n,u as b,j as e,a as h,B as l}from"./index-D0YIHR4A.js";import{L as p,H as f}from"./LeftSideBar-BipZwdxj.js";import{T as y}from"./TopLayoutShop-B_mN4XiN.js";import{a as N}from"./index.esm-BJdVWKmv.js";import"./index-DfkVdce-.js";import"./index-BMdVHJVA.js";import"./index-aIHYwc5K.js";/* empty css            */import"./logo-DG-ZgLhE.js";function q(){const{isDarkMode:r}=g(),[a,o]=n.useState(!1),[j,i]=n.useState(!0),c=b(),{register:d,handleSubmit:u,formState:{errors:s},reset:v}=N(),x=async m=>{console.log("onSubmit:",m),i(!0),o(!0);try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const w=await h.post("https://koicaresystemv2.azurewebsites.net/api/categories/add",{name:m.name},{headers:{Authorization:`Bearer ${t}`}});l.success("Category created successfully!"),c("/shop/category")}catch(t){console.log(t),l.error("Failed to create Category.")}finally{o(!1),i(!1)}};return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(p,{}),e.jsxs("div",{className:`relative ${r?"bg-custom-light text-white":"bg-white text-black"} overflow-y-auto flex-1 flex-col overflow-x-hidden duration-200 ease-linear`,children:[e.jsx(f,{}),e.jsxs("div",{className:"py-5 pb-0 px-[30px] mx-auto",children:[e.jsx(y,{text:"Category",textName:"Create Category",links:"shop/category"}),e.jsx("div",{className:"p-6 rounded-md border",children:e.jsxs("form",{onSubmit:u(x),noValidate:!0,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",children:"Category Name"}),e.jsx("input",{type:"text",id:"name",className:`w-full p-2 border rounded-md ${r?"bg-custom-dark text-white":"bg-white text-black"} ${s.name?"border-red-500":"border-gray-300"}`,...d("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters long"},maxLength:{value:50,message:"Name must not exceed 50 characters"}})}),s.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.name.message})]}),e.jsx("button",{type:"submit",className:`px-4 py-2 bg-blue-600 text-white rounded-md ${a?"opacity-50 cursor-not-allowed":"hover:bg-blue-700"}`,disabled:a,children:a?"Submitting...":"Create Category"})]})})]})]})]})}export{q as default};
