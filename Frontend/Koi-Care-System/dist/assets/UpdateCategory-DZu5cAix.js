import{e as w,d as N,u as j,r,j as e,a as l,B as c}from"./index-Qtd3etr3.js";import{L as k,H as v}from"./LeftSideBar-CO1q3EiE.js";import{T as S}from"./TopLayoutShop-B26udbzX.js";import{a as C}from"./index.esm-9so3oJW4.js";import"./index-Ds6Ab8W8.js";import"./index-DF6yzlP_.js";import"./index-CdZqjTQo.js";/* empty css            */import"./logo-DG-ZgLhE.js";function H(){const{id:s}=w(),{isDarkMode:d}=N(),u=j(),[o,m]=r.useState(!1),[$,i]=r.useState(!0),[L,g]=r.useState(null),{register:p,handleSubmit:x,formState:{errors:n},reset:h}=C(),y=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const a=await l.get(`https://koicaresystemv2.azurewebsites.net/api/categories/category/${s}/category`,{headers:{Authorization:`Bearer ${t}`}});g(a.data.data),h(a.data.data)}catch(t){console.error("Error fetching category:",t),c.error("Failed to fetch category details.")}finally{i(!1)}};r.useEffect(()=>{y()},[s]);const f=async t=>{i(!0),m(!0);try{const a=localStorage.getItem("token");if(!a)throw new Error("No token found");await l.put(`https://koicaresystemv2.azurewebsites.net/api/categories/category/${s}/update`,{name:t.name},{headers:{Authorization:`Bearer ${a}`}}),c.success("Category updated successfully!"),u("/shop/category")}catch(a){console.log(a),c.error("Failed to update Category.")}finally{m(!1),i(!1)}},b=t=>{f(t)};return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(k,{}),e.jsxs("div",{className:`relative ${d?"bg-custom-light text-white":"bg-white text-black"} overflow-y-auto flex-1 flex-col overflow-x-hidden duration-200 ease-linear`,children:[e.jsx(v,{}),e.jsxs("div",{className:"py-5 pb-0 px-[30px] mx-auto",children:[e.jsx(S,{text:"Category",textName:"Update Category",links:"shop/category"}),e.jsx("div",{className:" p-6 rounded-md border",children:e.jsxs("form",{onSubmit:x(b),noValidate:!0,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",children:"Category Name"}),e.jsx("input",{type:"text",id:"name",className:`w-full p-2 border rounded-md ${d?"bg-custom-dark text-white":"bg-white text-black"} ${n.name?"border-red-500":"border-gray-300"}`,...p("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters long"},maxLength:{value:50,message:"Name must not exceed 50 characters"}})}),n.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.name.message})]}),e.jsx("button",{type:"submit",className:`px-4 py-2 bg-blue-600 text-white rounded-md ${o?"opacity-50 cursor-not-allowed":"hover:bg-blue-700"}`,disabled:o,children:o?"Submitting...":"Update Category"})]})})]})]})]})}export{H as default};
