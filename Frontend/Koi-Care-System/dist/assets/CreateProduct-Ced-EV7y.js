import{d as D,r as i,u as B,j as e,a as c,B as x}from"./index-D7N4awOg.js";import{L as z,H as P}from"./LeftSideBar-BERCYyvN.js";import{T}from"./TopLayoutShop-W3se2pJy.js";import{a as L}from"./index.esm-Dqz6aoPb.js";import{S as _}from"./react-select.esm-B7gAeGI5.js";import{i as A}from"./react-select-animated.esm-CPn-Rql-.js";import"./index-CxgS5Qjg.js";import"./index-CQNJqrBT.js";import"./index-BnDvNXN4.js";/* empty css            */import"./logo-DG-ZgLhE.js";import"./toPropertyKey-PLuKRk1e.js";const M=A();function te(){const{isDarkMode:s}=D(),[n,u]=i.useState(!1),[V,p]=i.useState(!0),h=B(),[g,f]=i.useState([]),[F,y]=i.useState([]),[N,j]=i.useState([]),[b,k]=i.useState([]),{register:o,handleSubmit:w,formState:{errors:r}}=L(),v=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const a=await c.get("https://koicaresystemv2.azurewebsites.net/api/issues/issueType/all",{headers:{Authorization:`Bearer ${t}`}});j(a.data.data.map(l=>({value:l.id,label:`${l.parameterType} - ${l.conditionType}`})))}catch(t){console.log("Error fetching issue type:",t)}};i.useEffect(()=>{v()},[]);const S=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const a=await c.get("https://koicaresystemv2.azurewebsites.net/api/categories/all",{headers:{Authorization:`Bearer ${t}`}});f(a.data.data)}catch(t){console.log("Error fetching category:",t)}};i.useEffect(()=>{S()},[]);const $=async()=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No token found");const a=await c.get("https://koicaresystemv2.azurewebsites.net/api/suppliers/all",{headers:{Authorization:`Bearer ${t}`}});y(a.data.data)}catch(t){console.log("Error fetching tags:",t)}};i.useEffect(()=>{$()},[]);const C=async t=>{console.log("onSubmit:",t),p(!0),u(!0);try{const a=localStorage.getItem("token");if(!a)throw new Error("No token found");const l=b.map(d=>d.value),I=(await c.post("https://koicaresystemv2.azurewebsites.net/api/products/add",{name:t.name,brand:t.brand,price:t.price,inventory:t.inventory,description:t.description,description_detail:t.description_detail,category:t.category,supplierName:t.supplierName,issueTypeId:l},{headers:{Authorization:`Bearer ${a}`}})).data.data.id,m=t.files;if(m&&m.length>0){const d=new FormData;for(const q of m)d.append("files",q);d.append("productId",I),await c.post("https://koicaresystemv2.azurewebsites.net/api/images/upload",d,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"multipart/form-data"}})}x.success("Product created successfully!"),h("/shop/product")}catch(a){console.log(a),x.error("Failed to create Product.")}finally{u(!1),p(!1)}},E=t=>{k(t)};return e.jsxs("div",{className:"h-screen flex",children:[e.jsx(z,{}),e.jsxs("div",{className:`relative ${s?"bg-custom-light text-white":"bg-white text-black"} flex-1 overflow-y-auto`,children:[e.jsx(P,{}),e.jsxs("div",{className:"py-5 pb-0 px-[30px] mx-auto",children:[e.jsx(T,{text:"Product",textName:"Create Product",links:"shop/product"}),e.jsx("div",{className:" p-6 rounded-md border",children:e.jsxs("form",{onSubmit:w(C),noValidate:!0,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",children:"Product Name"}),e.jsx("input",{type:"text",id:"name",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${r.name?"border-red-500":"border-gray-300"}`,...o("name",{required:"Name is required",minLength:2,maxLength:50})}),r.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.name.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium mb-2",children:"Brand"}),e.jsx("input",{type:"text",id:"brand",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${r.brand?"border-red-500":"border-gray-300"}`,...o("brand",{required:"Brand is required"})}),r.brand&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.brand.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium mb-2",children:"Price"}),e.jsx("input",{type:"number",id:"price",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${r.price?"border-red-500":"border-gray-300"}`,...o("price",{required:"Price is required"})}),r.price&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.price.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"inventory",className:"block text-sm font-medium mb-2",children:"Inventory"}),e.jsx("input",{type:"number",id:"inventory",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${r.inventory?"border-red-500":"border-gray-300"}`,...o("inventory",{required:"Inventory is required"})}),r.inventory&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.inventory.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{id:"description",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${r.description?"border-red-500":"border-gray-300"}`,...o("description",{required:"Description is required"})}),r.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.description.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description_detail",className:"block text-sm font-medium mb-2",children:"Detailed Description"}),e.jsx("textarea",{id:"description_detail",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${r.description_detail?"border-red-500":"border-gray-300"}`,...o("description_detail",{required:"Detailed description is required"})}),r.description_detail&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.description_detail.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium mb-2",children:"Category"}),e.jsxs("select",{id:"category",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${r.category?"border-red-500":"border-gray-300"}`,...o("category",{required:"Category is required"}),children:[e.jsx("option",{value:"",children:"Select Category"}),g.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]}),r.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.category.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"supplierName",className:"block text-sm font-medium mb-2",children:"Supplier"}),e.jsxs("select",{id:"supplierName",className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${r.supplierName?"border-red-500":"border-gray-300"}`,...o("supplierName",{required:"Supplier is required"}),children:[e.jsx("option",{value:"",children:"Select Supplier"}),F.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]}),r.supplierName&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.supplierName.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"issueTypeId",className:"block text-sm font-medium mb-2",children:"Select Issue"}),e.jsx(_,{isMulti:!0,options:N,value:b,onChange:E,closeMenuOnSelect:!1,components:M,styles:{control:(t,a)=>({...t,backgroundColor:s?"#1F2937":"#FFFFFF",color:s?"#FFFFFF":"#000000",borderColor:r.tags?"#EF4444":"#D1D5DB","&:hover":{borderColor:r.tags?"#EF4444":"#9CA3AF"}}),menu:t=>({...t,backgroundColor:s?"#1F2937":"#FFFFFF"}),option:(t,a)=>({...t,backgroundColor:a.isFocused?s?"#374151":"#E5E7EB":s?"#1F2937":"#FFFFFF",color:s?"#FFFFFF":"#000000"}),multiValue:t=>({...t,backgroundColor:s?"#4B5563":"#E5E7EB",color:s?"#FFFFFF":"#000000"}),multiValueLabel:t=>({...t,color:s?"#FFFFFF":"#000000"}),multiValueRemove:t=>({...t,color:s?"#FFFFFF":"#000000",":hover":{backgroundColor:s?"#374151":"#D1D5DB",color:s?"#F87171":"#EF4444"}})}})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"files",className:"block text-sm font-medium mb-2",children:"Upload Images"}),e.jsx("input",{type:"file",id:"files",multiple:!0,className:`w-full p-2 border rounded-md ${s?"bg-custom-dark text-white":"bg-white text-black"} ${r.files?"border-red-500":"border-gray-300"}`,...o("files")}),r.files&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.files.message})]}),e.jsx("button",{type:"submit",className:`mt-5 w-full bg-blue-600 text-white p-2 rounded-md ${n?"opacity-50 cursor-not-allowed":""}`,disabled:n,children:n?"Creating...":"Create Product"})]})})]})]})]})}export{te as default};
